<!DOCTYPE html>
<html lang="en">
<head>
    <title>Lettore json persone</title>
</head>
<body background="sfondoJSON.webp">
    <center>
        <div style="align: center; background-color: white; border: 3px solid; margin-top: 15%; margin-left: 30%; margin-right: 30%;">
    <table cellpadding="1px">
        <thead>
            <tr bgcolor="007FFF">
                <th align="center">Nome</th>
                <th align="center">Cognome</th>
                <th align="center">Età</th>
                <th align="center">Indirizzo</th>
                <th align="center">Città</th>
                <th align="center">Telefono</th>
                <th align="center">CV</th>
            </tr>
        </thead>
        <tbody id="corpo">
        </tbody>
    </table>
            
    <script>
        let tbody=document.getElementById("corpo")
        let lettore=new XMLHttpRequest()
        lettore.open("GET","persone.json",true);
        lettore.onreadystatechange=function(){
            if(this.readyState == 4 && this.status == 200){
                let persone=JSON.parse(this.responseText)
                for(const persona of persone){
                    let riga=document.createElement("tr")
                    tbody.appendChild(riga)
                    let d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.nome
                    d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.cognome
                    d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.eta
                    d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.indirizzo
                    d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.citta
                    d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.telefono.join(", ")
                    <style>
                    .thumbnail {
                        width: 50px;
                        height: 50px;
                        border-radius: 50%;
                    }
                    </style>
                    //d.innerText=persona.cv
                    // Creazione del link
                    /*var link = document.createElement('a');
                    link.href = thumb.link;
                    link.target = '_blank';  // Link si apre in una nuova finestra/scheda
                    // Creazione dell'immagine
                    var img = document.createElement('img');
                    img.src = persona.cv;  // Percorso dell'immagine
                    img.width = 150;  // Imposta una dimensione fissa per le thumbnail
                    img.height = 150;
    
                    // Aggiungi l'immagine al link
                    link.appendChild(img);
                    
                    // Aggiungi il link al contenitore
                    container.appendChild(link);*/

                     // Aggiungiamo la foto come thumbnail
                    d = document.createElement("td");
                    riga.appendChild(d);
                    let img = document.createElement("img");
                    img.src = persona.cv;  // Percorso dell'immagine (deve essere relativo o assoluto)
                    img.classList.add("thumbnail");
                    d.appendChild(img);
                    
                    // Aggiungiamo il link al CV
                    d = document.createElement("td");
                    riga.appendChild(d);
                    let cvLink = document.createElement("a");
                    cvLink.href = persona.link;  // URL del CV
                    cvLink.target = "_blank";   // Apre il CV in una nuova finestra
                    cvLink.innerText = "Visualizza CV";
                    d.appendChild(cvLink);



                    

                }
            }
        }
        lettore.send();
    </script>
    </center>
</body>
</html>
