<!DOCTYPE html>
<html lang="en">
<head>
    <title>Lettore json persone</title>
</head>
<body background="sfondoJSON.webp">
    <center>
        <div style="align: center; background-color: white; border: 3px solid; margin-top: 15%; margin-left: 30%; margin-right: 30%;">
    <table cellpadding="1px">
        <thead>
            <tr bgcolor="007FFF">
                <th align="center">ID</th>
                <th align="center">NOME</th>
                <th align="center">COGNOME</th>
                <th align="center">ETÀ</th>
                <th align="center">INDIRIZZO</th>
                <th align="center">CITTÀ</th>
                <th align="center">TELEFONO</th>
                <th align="center">CV</th>
                <th align="center">PORTFOLIO</th>
            </tr>
        </thead>
        <tbody id="corpo">
        </tbody>
    </table>      
    <script>
        let tbody=document.getElementById("corpo")
        let lettore=new XMLHttpRequest()
        lettore.open("GET","persone.json",true);
        lettore.onreadystatechange=function(){
            if(this.readyState == 4 && this.status == 200){
                let persone=JSON.parse(this.responseText)
                for(const persona of persone){
                    let riga=document.createElement("tr")
                    tbody.appendChild(riga)
                    let d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.id
                    d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.nome
                    d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.cognome
                    d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.eta
                    d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.indirizzo
                    d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.citta
                    d=document.createElement("td")
                    riga.appendChild(d)
                    d.innerText=persona.telefono.join(", ")
                    let x=document.createElement("td")
                    riga.appendChild(x)
                    let h=document.createElement("a")
                    h.setAttribute("href","cv.html?id"+persona.id)
                    let im=document.createElement("img")
                    im.src=persone.cv
                    im.style.width = "50px";
                    im.style.height = "50px";
                    h.appendChild(im)
                    x.appendChild(h)
                }
            }
        }
        lettore.send();
    </script>
    </center>
</body>
</html>
